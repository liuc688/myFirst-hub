<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<script type="text/javascript">
  window._AMapSecurityConfig = {
    securityJsCode: 'efdee26d82447d9d31c704b25ec70e58',
  }
</script>
<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=2c4de54ffa2ed6844b402d351af10a73">
</script>

<body>
  <div id="weather" style="width:50px;height:50px;background:pink;background: url('./weatherIcon/lei.png');">
    天气
  </div>
  <script type="text/javascript">
    //加载天气查询插件
    AMap.plugin('AMap.Weather', function () {
      const iconWeatherMap = {
        longjuanfeng: ['强风/劲风', '疾风', '大风', '烈风', '风暴', '狂爆风', '飓风', '热带风暴', '龙卷风'],
        yun: ['少云', '晴间多云', '多云'],
        xue: ['雪', '阵雪', '小雪', '中雪', '大雪', '暴雪', '小雪-中雪', '中雪-大雪', '大雪-暴雪', '冷'],
        wu: ['浮尘', '扬沙', '沙尘暴', '强沙尘暴', '雾', '浓雾', '强浓雾', '轻雾', '大雾', '特强浓雾'],
        qing: ['晴', '热','有风', '平静', '微风', '和风', '清风'],
        yujiaxue: ['雨雪天气', '雨夹雪', '阵雨夹雪'],
        yu: ['阵雨', '雷阵雨', '雷阵雨并伴有冰雹', '小雨', '中雨', '大雨', '暴雨', '大暴雨', '特大暴雨', '强阵雨', '强雷阵雨', '极端降雨', '毛毛雨/细雨', '雨', '小雨-中雨', '中雨-大雨', '大雨-暴雨', '暴雨-大暴雨', '大暴雨-特大暴雨', '冻雨'],
        yin: ['阴', '霾', '中度霾', '重度霾', '严重霾', '未知']
      }
      //创建天气查询实例
      var weather = new AMap.Weather();
      //执行实时天气信息查询
      weather.getLive('杭州市', function (err, data) {
        console.log(err, data);
        for (const weatherKey in iconWeatherMap) {
          if(iconWeatherMap[weatherKey].includes(data.weather)) {
            console.log(weatherKey)
            document.querySelector("#weather").style.background = "url(./weatherIcon/"+weatherKey+".png)"
          }
        }
      });
    });
  </script>
</body>

</html>